# Chapter 10 시스템 테스트의 자동화

- 단위 테스트의 커버리지 비율을 측정하면서, 가벼운 탐색적 테스트로 빠르게 릴리즈하는 것이 목표라면 시스템 테스트를 자동화하고 개발 속도와 품질을 차츰 높여나가는 것도 좋음

### 캡처 & 리플레이 자동화

- GUI상에서의 자동화 테스트를 말함
- 예를 들어 200, 300 좌표에 있는 버튼을 클릭하는 테스트
- **UI가 변경되면 바로 깨지고, 이러한 테스트들이 많을 경우 유지보수가 어려움**

  - 차라리 수동 테스트가 오히려 좋을 수도 있음
  - 프론트에도 스냅샷 테스트가 존재하는데 이거랑 비슷한 것 같음 (가장 깨지기 쉬운 테스트임)

<br/>
아래는 도러시 그레이엄이 정의한 테스트 자동화 수준

| 레벨    | 기술레벨             | 설명                                                                                       |
| ------- | -------------------- | ------------------------------------------------------------------------------------------ |
| level 1 | 선형 스크립트        | 수동으로 작성하거나, 수동 테스트를 캡처해서 기록하는 방법                                  |
| level 2 | 구조화 스크립트      | 선택과 반복 프로그래밍 구조를 사용하는 방법                                                |
| level 3 | 공유 스크립트        | 스크립트를 다른 스크립트로부터 호출할 수 있도록 만들어 재사용하는 방법                     |
| level 4 | 데이터 주도 스크립트 | 컨트롤 스크립트를 사용해 파일 또는 스프레드 시트에 있는 테스트 데이터를 읽는 방법          |
| level 5 | 키워드 주도 스크립트 | 파일 또는 스프레드 시트에 컨트롤 스크립트까지 포함한 테스트 관련 정보를 모두 저장하는 방법 |

### 키워드 주도 자동 테스트

- 가장 나은 방식 중 하나로 키워드 주도 테스트가 있음
  - 액션과 다른 하나의 테스트 데이터 속성을 효율적으로 사용함
  - 그래서 프론트에서 이런 방식으로 테스트 하곤 함
  - 예시 ) 계산기에서 "1 + 9"가 입력되어 있는 상황에서 "=" 버튼을 클릭하면 화면에 "10"이 출력되어야 한다.

# Chapter 11 탐색적 테스트

- 탐색적 테스트는 단위 테스트를 충분히 수행한 조직이라면 도움되는 기법임
- 스킬이 있는 테스트 담당자가 책임을 지고 테스트 케이스는 작성하지 않은 채, 테스트 학습과 실행을 빠르게 수행하는 기법
  - 탐색적 테스트는 소프트웨어 테스트의 한 스타일로
  - 개인에게 자유 의지를 갖게 함과 동시에 책임을 더 명확하게 한다.
  - 테스트 활동을 지속해서 세련되게 만든다.
  - 테스트 관련 학습, 설계, 실행, 결과 보고와 같은 활동을 수행한다.

> 탐색적 테스트는 테스트 케이스를 작성하지 않고, 테스트 대상을 자유롭게 탐색하면서 테스트를 수행하는 방법임
>
> 이전에 실행한테스트 결과 등 테스트 대상에 대한 이해를 바탕으로 다양한 시나리오를 테스트하여 **예상치 못한 버그를 발견하는데에 효과적임**

주로 아래의 경우 진행함

- 테스트 대상에 대한 이해가 부족한 경우
- 테스트 대상이 복잡하거나 예측하기 어려운 경우
- 새로운 기술이나 플랫폼을 테스트하는 경우
- 제품에 대해 신속하게 학습해야 할 때

-> 즉, 아무거나 슉슉 눌러보면서 테스트하는 것임 (실제로 이렇게 할 때, 또 해당 기능을 처음 사용해보는 사람이 테스트 할 때 예상하지 못한 버그를 많이 발견했음)

**탐색적 테스트의 단점**

- 테스터의 기술에 따라 효과가 달라짐
- 테스터의 도메인 지식에 의해 테스트 범위가 제한적임
- 짧은 시간 테스트에 적절함 (짧게 자주 실행하는 것이 좋을듯)

-> 필자는 다음과 같은 조건 하에 탐색적 테스트를 수행하면 시스템 테스트 비용을 1/10로 줄일 수 있다고 말함 (어떻게인지는 잘 모르겠음)

- 높은 코드 커버리지
- MVC 분리된 아키텍처
- 각 함수의 매케이브 수 20 이하
- 모든 요구사항 사양을 리뷰
- 경쟁상태(race condition)버그에 대한 충분한 대비

-> 이걸 기반으로 탐색적 테스트를 수행했을 때 1/10로 줄이는 것이면 탐색적 테스트의 장점이 아니지 않나..?

### Race Condition(경쟁상태)

- 어떤 하나의 데이터에 여러 태스크나 프로세스 또는 스레드가 접근할 수 있는 상태이며, 그 시점이 언제인지에 따라 버그가 발생함
- 저번 과제 진행할 때 찾아봤음 (해결 방법으로 DB에 lock을 거는 등의 방식으로 해결 가능 !)
  - 예시 ) - 만약 잔액이 10만원일 경우, 두 사람이 각각 거의 동시에 30만원, 10만원을 입급했다.
  - 그럴 경우 기존의 데이터를 가져와 입금한 만큼 금액을 더해 최종적으로는 50만원이 되어야 한다.
  - 하지만 동시에 진행할 경우, 40만원 또는 20만원이 결과값으로 나타날 수 있음
- Lock을 해제하는 것을 잊어버려 오류가 발생하는 것 또한 경쟁상태에 포함됨

- 이러한 문제는 테스트로는 우선 보증할 수 없음

-> 해결 방법은 코드리뷰 뿐!

# Chapter 12 테스트 전체 설계

단위테스트를 실행하지 않으면 조직은 피폐해짐

- 수동적인 시스템 테스트로 버그를 계속 찾아내는 것은 조직의 내재적 동기(motivation)을 망가트림
- 동일한 테스트를 수동으로 반복하므로, 테스트 엔지니어의 커리어 패스가 불투명해짐
- 동일한 형태의 버그를 사람이 발견하고 개발자가 수정함
- 버그 유임과 발견 시점이 어긋나므로, 버그 유입을 방지하기 어려움 (단위테스트는 바로 찾아내는데, 수동적으로 하면 무엇때문에 발생했는지 모르기 때문)
