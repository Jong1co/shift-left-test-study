통합 테스트
=============

## 9.1 통합 테스트 패턴

큰 통합테스트에서의 활동을 설정, 단위 테스트나 시스템 테스트를 생략하는 통합 테스트 중시 방법도 있음 

API 테스트(통합 테스트)

- 목(Mock): 행동을 시뮬레이션하고, 그 상호작용을 검증하기 위해 사용되는 객체
- 스텁(Stub): 테스트 중인 코드의 외부 의존성을 대체하여 간단하게 고정된 데이터를 반환하는 객체
- 드라이버(Driver): 테스트 대상 코드 또는 모듈을 활성화시켜 실행하는데 사용되는 테스트 코드

PS) API 테스트와 단위 테스트의 차이?

- 단위 테스트
  - 단위 테스트는 가장 낮은 수준의 테스트로, 소프트웨어의 개별 구성 요소나 모듈을 대상으로 수행됩니다. 주 목적은 각 기능(함수, 메소드)이 의도된 대로 동작하는지 확인하는 것입니다.
  - 목적: 코드의 특정 세그먼트가 독립적으로 정확하게 동작하는지 검증합니다.
  범위: 가장 작은 코드 단위(함수나 메소드)를 대상으로 하며, 종종 모의 객체(Mock Objects)나 스텁(Stubs)을 사용하여 외부 종속성을 제거합니다.
  - 도구: JUnit, NUnit, pytest 등
  - 개발자 주도: 주로 개발자에 의해 작성되며, TDD(테스트 주도 개발) 접근 방식에서 중요한 부분입니다.

- API 테스트(통합테스트)
  - API 테스트는 애플리케이션 프로그래밍 인터페이스(API)가 예상대로 작동하는지 확인하는 테스트입니다. 이는 API의 안정성, 성능, 보안 및 기능을 검증합니다.
  - 목적: 외부 시스템과의 통신 인터페이스인 API가 요구 사항을 충족하는지 확인합니다.
  - 범위: 단일 API 호출뿐만 아니라 여러 API의 상호 작용을 포함할 수 있습니다. 이는 시스템 통합의 일부로 볼 수 있습니다.
  - 도구: Postman, Swagger, SoapUI 등
  - QA 엔지니어 주도: 주로 품질 보증(QA) 팀이나 개발자에 의해 수행되며, 종종 자동화되어 반복적인 테스트를 수행합니다.

## 9.2 테스트와 API 버그 밀도에 관한 사고방식

통합 테스트(API 테스트)를 수행할 때는 어떤 방법으로 하면 좋을지, 어디까지 해야 완벽할지 의문이 들 수 있음

추천 방식 : API에 입력 파라미터가 있을 때는 그 파라미터에 대한 경곗값 테스트를 하고 가능한 한 해당 API를 다양한 형태로 호출한 뒤, 상태 전이까지 커버할 수 있다면 완벽.

-> 이때 코드 커버리지 비율을 추가하지 않는 대신, 경계를 어느정도 커버했는지를 측정할 것

시스템 테스트에선 **조합 테스트**를 하지 말것, API 테스트라면 조합 테스트를 하는게 좋음


## 9.3 카오스 엔지니어링

카오스 엔지니어링 = 시스템의 프로세스,CPU 등등 무작위로 멈췄을때 시스템 전체가 치명적인 상태에 빠지지 않도록 시스템을 설계하는 도구 -> AWS에서 야무지게 지원함

비기능 테스트임 예를 들어 CPU에 부하를 주거나, 네트워크 속도를 저하하거나 -> 시프트-레프트나 애자일 테스트와는 관계X지만 대규모 시스템에는 필요한 테스트 기법임

그래서 추천 방식

단위테스트는 화이트박스 테스트로하고 통합/시스템 테스트는 블랙박스 테스트를 하기

구체적으로 어떻게? 하나 또는 두개의 블랙박스 테스트 기법을 선택, 최후 공정 테스트에서 수행 -> 이때 추천하는 것이 카오스 엔지니어링

PS)
통합테스트 = 다양한 코드 유닛이 함께 작동할때의 상호작용을 검증, 인터페이스 테스트
시스템 테스트 = 전체 소프트웨어 시스템이 대상

요즘 MSA가 유행중임 그렇다면 더더욱 마이크로 서비스 중 하나를 일부러 다운시켜보는건어떨까?

실제로 규모가 작은팀일수록 조기 버그 검출률이 높다고함! 작은 팀 안에서 모든 것을 자발적으로 개발하는 것이 애자일의 본질 중 하나임 각 마이크로 서비스의 품질을 해당 팀이 보증하고, 때로는 팀 사이의 커뮤니케이션 오류로 버그가 발생하나 -> 이를 카오스 엔지니어링으로 담보해봅시당

카오스 멍키 테스트 : 카오스 멍키(Chaos Monkey) 테스트는 Netflix에서 개발한 카오스 엔지니어링의 일부로, 무작위적으로 서버나 애플리케이션의 인스턴스를 종료시키는 방식으로 운영 환경의 견고함을 테스트하는 방법입니다. 이 툴은 주로 클라우드 기반 인프라에서 사용되며, 시스템이 예기치 않은 문제에 얼마나 잘 대응할 수 있는지를 평가하기 위해 설계되었습니다.

